{"is_source_file": true, "format": "Python", "description": "This file defines FastAPI routes for managing quote export jobs, including creating exports in various formats, listing, and retrieving export data. It handles in-memory storage for export outputs and supports multiple export formats like JSON, plain text, LinkedIn, Twitter, Instagram, SRT, and VTT. It also includes internal functions for formatting quote data into different formats.", "external_files": ["src.api.models", "src.api.store"], "external_methods": ["generate_id", "QUOTES.get"], "published": ["create_export_job", "list_export_jobs", "get_export_job"], "classes": [{"name": "ExportCreateRequest", "description": "Pydantic model defining the request payload for creating an export, including quote IDs, format, and optional title and author."}, {"name": "ExportResponse", "description": "Pydantic model defining the response containing the export job metadata and an optional note."}], "methods": [{"name": "ExportResponse create_export_job(payload: ExportCreateRequest)", "description": "Handles creating a new export job, validating quote IDs, generating output, and storing results in-memory.", "scope": "", "scopeKind": ""}, {"name": "list_export_jobs()", "description": "Returns a list of all current export jobs stored in memory.", "scope": "", "scopeKind": ""}, {"name": "get_export_job(job_id: str, download: int | None = None)", "description": "Retrieves metadata or the raw export output for a specific job ID.", "scope": "", "scopeKind": ""}, {"name": "Tuple[str,str] _generate_output(fmt: ExportFormat, quotes: List[Quote], title: str | None, author: str | None)", "description": "Generates export content in specified format from quotes, title, and author.", "scope": "", "scopeKind": ""}, {"name": "str _format_text(fmt: ExportFormat, quotes: List[Quote], title: str | None = None, author: str | None = None)", "description": "Creates formatted text output for various import/export formats like Twitter, LinkedIn, or plain text.", "scope": "", "scopeKind": ""}, {"name": "str _format_instagram(quotes: List[Quote])", "description": "Generates a caption style Instagram export from quotes.", "scope": "", "scopeKind": ""}, {"name": "str _format_srt(quotes: List[Quote])", "description": "Creates SRT subtitle blocks from quotes with timing info.", "scope": "", "scopeKind": ""}, {"name": "str _format_vtt(quotes: List[Quote])", "description": "Creates WebVTT subtitle files from quotes.", "scope": "", "scopeKind": ""}, {"name": "str _format_extension(fmt: ExportFormat)", "description": "Provides file extensions based on format (not directly referenced in route logic)", "scope": "", "scopeKind": ""}, {"name": "str fmt_time(seconds: float | None)", "scope": "_format_vtt", "scopeKind": "function", "description": "unavailable"}], "calls": ["generate_id", "QUOTES.get"], "search-terms": ["exports", "create_export_job", "list_export_jobs", "get_export_job", "format", "quote_ids", "export", "APIRouter", "ExportFormat", "ExportJob"], "state": 2, "file_id": 10, "knowledge_revision": 38, "git_revision": "dcaf5d9fbd7c8beb91dd3c12ba73c997083c95c2", "revision_history": [{"22": ""}, {"38": "dcaf5d9fbd7c8beb91dd3c12ba73c997083c95c2"}], "ctags": [{"_type": "tag", "name": "ExportCreateRequest", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^class ExportCreateRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ExportResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^class ExportResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_EXPORT_OUTPUTS", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^_EXPORT_OUTPUTS: Dict[str, Tuple[str, str]] = {}$/", "language": "Python", "typeref": "typename:Dict[str, Tuple[str, str]]", "kind": "variable"}, {"_type": "tag", "name": "_format_extension", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^def _format_extension(fmt: ExportFormat) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(fmt: ExportFormat)"}, {"_type": "tag", "name": "_format_instagram", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^def _format_instagram(quotes: List[Quote]) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(quotes: List[Quote])"}, {"_type": "tag", "name": "_format_srt", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^def _format_srt(quotes: List[Quote]) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(quotes: List[Quote])"}, {"_type": "tag", "name": "_format_text", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^def _format_text(fmt: ExportFormat, quotes: List[Quote], title: str | None = None, author: str |/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(fmt: ExportFormat, quotes: List[Quote], title: str | None = None, author: str | None = None)"}, {"_type": "tag", "name": "_format_vtt", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^def _format_vtt(quotes: List[Quote]) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(quotes: List[Quote])"}, {"_type": "tag", "name": "_generate_output", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^def _generate_output(fmt: ExportFormat, quotes: List[Quote], title: str | None, author: str | No/", "language": "Python", "typeref": "typename:Tuple[str,str]", "kind": "function", "signature": "(fmt: ExportFormat, quotes: List[Quote], title: str | None, author: str | None)"}, {"_type": "tag", "name": "create_export_job", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^def create_export_job(payload: ExportCreateRequest) -> ExportResponse:$/", "language": "Python", "typeref": "typename:ExportResponse", "kind": "function", "signature": "(payload: ExportCreateRequest)"}, {"_type": "tag", "name": "export", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^    export: ExportJob = Field(..., description=\"Created\\/processed export job metadata.\")$/", "language": "Python", "typeref": "typename:ExportJob", "kind": "variable", "scope": "ExportResponse", "scopeKind": "class"}, {"_type": "tag", "name": "fmt_time", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^    def fmt_time(seconds: float | None) -> str:$/", "file": true, "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(seconds: float | None)", "scope": "_format_srt", "scopeKind": "function"}, {"_type": "tag", "name": "fmt_time", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^    def fmt_time(seconds: float | None) -> str:$/", "file": true, "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(seconds: float | None)", "scope": "_format_vtt", "scopeKind": "function"}, {"_type": "tag", "name": "format", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^    format: ExportFormat = Field(..., description=\"Target export format.\")$/", "language": "Python", "typeref": "typename:ExportFormat", "kind": "variable", "scope": "ExportCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "get_export_job", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^def get_export_job(job_id: str, download: int | None = None):$/", "language": "Python", "kind": "function", "signature": "(job_id: str, download: int | None = None)"}, {"_type": "tag", "name": "list_export_jobs", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^def list_export_jobs():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "quote_ids", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^    quote_ids: List[str] = Field($/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "ExportCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/exports.py", "pattern": "/^router = APIRouter(tags=[\"exports\"])$/", "language": "Python", "kind": "variable"}], "hash": "a567fbb53b562b2dd37997ca37cee70e", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/routers/exports.py", "fields": [{"name": "Dict[str, Tuple[str, str]] _EXPORT_OUTPUTS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ExportJob export", "scope": "ExportResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "ExportFormat format", "scope": "ExportCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] quote_ids", "scope": "ExportCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"exports\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}