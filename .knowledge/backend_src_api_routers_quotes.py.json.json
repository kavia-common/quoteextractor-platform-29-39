{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing quotes within a FastAPI application, including creating, extracting, listing, retrieving, updating, and deleting quote resources. It also contains internal logic for sentence splitting used in quote extraction.", "external_files": ["src.api.models", "src.api.store"], "external_methods": ["fastapi.APIRouter", "fastapi.HTTPException", "fastapi.Query", "pydantic.BaseModel", "pydantic.Field", "src.api.models.JobStatus", "src.api.models.Quote", "src.api.models.Transcript", "src.api.store.QUOTES", "src.api.store.TRANSCRIPTS", "src.api.store.ASSETS", "src.api.store.generate_id"], "published": ["create_quote", "extract_quotes", "list_quotes", "get_quote", "update_quote", "delete_quote"], "classes": [{"name": "QuoteCreateRequest", "description": "Pydantic model for creating a new quote, including transcript ID, text, timing, confidence, and tags."}, {"name": "QuoteResponse", "description": "Pydantic model for the response containing a Quote object."}, {"name": "QuoteExtractRequest", "description": "Pydantic model for requesting quote extraction, including optional asset ID, transcript ID, raw text, max candidates, and minimum length."}, {"name": "QuoteExtractResponse", "description": "Pydantic model for the response containing a list of generated quotes."}, {"name": "QuoteUpdateRequest", "description": "Pydantic model for updating a quote's fields, including text, timing, confidence, approval status, and tags."}], "methods": [{"name": "create_quote", "description": "Handles POST requests to create a new quote from a transcript, generating a unique ID and storing it."}, {"name": "extract_quotes", "description": "Handles POST requests to generate mock quote candidates from transcript text or existing transcripts/assets, using simple sentence splitting."}, {"name": "list_quotes", "description": "Handles GET requests to list quotes with optional filters for asset ID, approval status, and minimum confidence."}, {"name": "get_quote", "description": "Handles GET requests to retrieve a specific quote by ID."}, {"name": "update_quote", "description": "Handles PATCH requests to update fields of an existing quote, including approval status."}, {"name": "delete_quote", "description": "Handles DELETE requests to remove a quote by ID."}, {"name": "_split_sentences", "description": "Internal helper function to split text into sentences based on punctuation for quote extraction."}], "calls": ["generate_id", "TRANSCRIPTS.get", "ASSETS", "TRANSCRIPTS.values", "QUOTES.__setitem__", "QUOTES.get", "QUOTES.__delitem__", "datetime.utcnow"], "search-terms": ["quote extraction", "quote API routes", "quote management", "mock quote generation", "sentence splitting", "FastAPI quotes router"], "state": 2, "file_id": 16, "knowledge_revision": 65, "git_revision": "aa9e188b7602ef2a36a71dcd513744158afbd86a", "ctags": [], "filename": "backend/src/api/routers/quotes.py", "hash": "d368e32bf0c6679c3c503744236c64f3", "format-version": 4, "code-base-name": "https://github.com/kavia-common/quoteextractor-platform-29-39.git:kavia-main", "revision_history": [{"65": "aa9e188b7602ef2a36a71dcd513744158afbd86a"}]}