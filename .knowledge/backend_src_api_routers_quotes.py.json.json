{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing quotes within a transcription or transcript management system. It includes endpoints for creating, extracting (mocked), listing, retrieving, updating, and deleting quotes. The code leverages FastAPI, Pydantic models, and in-memory data stores, handling quotes linked to transcripts and assets, with some logic for generating quote candidates from transcript text.", "external_files": ["src.api.models", "src.api.store"], "external_methods": ["src.api.store.generate_id"], "published": ["create_quote", "extract_quotes", "list_quotes", "get_quote", "update_quote", "delete_quote"], "classes": [{"name": "QuoteCreateRequest", "description": "Request model for creating a new quote, including transcript ID, text, timing, confidence, and tags."}, {"name": "QuoteResponse", "description": "Response model wrapping a Quote object after creation."}, {"name": "QuoteExtractRequest", "description": "Request model for extracting quote candidates from transcript text or IDs, with parameters for maximum candidates and minimum length."}, {"name": "QuoteExtractResponse", "description": "Response model containing a list of generated Quote objects."}, {"name": "Quote", "description": "The core model representing a quote, imported from src.api.models (not detailed here)."}, {"name": "QuoteUpdateRequest", "description": "Model for updating quote fields, including text, timing, confidence, approval, and tags."}], "methods": [{"name": "QuoteResponse create_quote(payload: QuoteCreateRequest)", "description": "Creates a new quote resource linked to a transcript after validating transcript existence.", "scope": "", "scopeKind": ""}, {"name": "QuoteExtractResponse extract_quotes(payload: QuoteExtractRequest)", "description": "Generates mock quote candidates from provided transcript text or IDs, storing them in in-memory store.", "scope": "", "scopeKind": ""}, {"name": "list_quotes( assetId: Optional[str] = Query( default=None, description=\"Filter quotes linked to transcripts of this asset.\" ), status: Optional[str] = Query( default=None, description=\"Filter by approval status: 'approved' or 'pending'.\" ), minConfidence: Optional[float] = Query( default=None, ge=0.0, le=1.0, description=\"Minimum confidence score (0..1).\" ), )", "description": "Lists quotes filtered by asset ID, approval status, and confidence threshold.", "scope": "", "scopeKind": ""}, {"name": "Quote get_quote(quote_id: str)", "description": "Fetches a quote by its ID, raising 404 if not found.", "scope": "", "scopeKind": ""}, {"name": "Quote update_quote(quote_id: str, payload: QuoteUpdateRequest)", "description": "Updates fields of an existing quote, including approval status.", "scope": "", "scopeKind": ""}, {"name": "delete_quote(quote_id: str)", "description": "Deletes a quote by its ID.", "scope": "", "scopeKind": ""}, {"name": "List[str] _split_sentences(text: str)", "description": "Utility function to split transcript text into sentences based on punctuation for quote extraction.", "scope": "", "scopeKind": ""}], "calls": ["src.api.store.generate_id", "transcript_ref.text", "TRANSCRIPTS.get", "QUOTES.__setitem__", "QUOTES.get", "TRANSCRIPTS.values", "len", "max", "min"], "search-terms": ["quotes", "extract", "transcript", "API router", "quote management", "mock quote generation", "fastapi quotes endpoint"], "state": 2, "file_id": 9, "knowledge_revision": 37, "git_revision": "aa9e188b7602ef2a36a71dcd513744158afbd86a", "revision_history": [{"20": ""}, {"37": "aa9e188b7602ef2a36a71dcd513744158afbd86a"}], "ctags": [{"_type": "tag", "name": "QuoteCreateRequest", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^class QuoteCreateRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuoteExtractRequest", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^class QuoteExtractRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuoteExtractResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^class QuoteExtractResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuoteResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^class QuoteResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QuoteUpdateRequest", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^class QuoteUpdateRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_split_sentences", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^def _split_sentences(text: str) -> List[str]:$/", "language": "Python", "typeref": "typename:List[str]", "kind": "function", "signature": "(text: str)"}, {"_type": "tag", "name": "approved", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    approved: Optional[bool] = Field(None, description=\"Approval status.\")$/", "language": "Python", "typeref": "typename:Optional[bool]", "kind": "variable", "scope": "QuoteUpdateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "asset_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    asset_id: Optional[str] = Field($/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "QuoteExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "confidence", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    confidence: Optional[float] = Field(None, description=\"AI confidence 0..1.\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "QuoteCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "confidence", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    confidence: Optional[float] = Field(None, description=\"AI confidence.\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "QuoteUpdateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "create_quote", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^def create_quote(payload: QuoteCreateRequest) -> QuoteResponse:$/", "language": "Python", "typeref": "typename:QuoteResponse", "kind": "function", "signature": "(payload: QuoteCreateRequest)"}, {"_type": "tag", "name": "delete_quote", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^def delete_quote(quote_id: str):$/", "language": "Python", "kind": "function", "signature": "(quote_id: str)"}, {"_type": "tag", "name": "end", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    end: Optional[float] = Field(None, description=\"End time in seconds.\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "QuoteCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "end", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    end: Optional[float] = Field(None, description=\"End time seconds.\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "QuoteUpdateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "extract_quotes", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^def extract_quotes(payload: QuoteExtractRequest) -> QuoteExtractResponse:$/", "language": "Python", "typeref": "typename:QuoteExtractResponse", "kind": "function", "signature": "(payload: QuoteExtractRequest)"}, {"_type": "tag", "name": "get_quote", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^def get_quote(quote_id: str) -> Quote:$/", "language": "Python", "typeref": "typename:Quote", "kind": "function", "signature": "(quote_id: str)"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    items: List[Quote] = Field(default_factory=list, description=\"Created quote items.\")$/", "language": "Python", "typeref": "typename:List[Quote]", "kind": "variable", "scope": "QuoteExtractResponse", "scopeKind": "class"}, {"_type": "tag", "name": "list_quotes", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^def list_quotes($/", "language": "Python", "kind": "function", "signature": "( assetId: Optional[str] = Query( default=None, description=\"Filter quotes linked to transcripts of this asset.\" ), status: Optional[str] = Query( default=None, description=\"Filter by approval status: 'approved' or 'pending'.\" ), minConfidence: Optional[float] = Query( default=None, ge=0.0, le=1.0, description=\"Minimum confidence score (0..1).\" ), )"}, {"_type": "tag", "name": "max_candidates", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    max_candidates: int = Field($/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "QuoteExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "min_length", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    min_length: int = Field($/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "QuoteExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^router = APIRouter(tags=[\"quotes\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    start: Optional[float] = Field(None, description=\"Start time in seconds.\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "QuoteCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    start: Optional[float] = Field(None, description=\"Start time seconds.\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "QuoteUpdateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    tags: Optional[list[str]] = Field(None, description=\"Tags.\")$/", "language": "Python", "typeref": "typename:Optional[list[str]]", "kind": "variable", "scope": "QuoteUpdateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    tags: list[str] = Field(default_factory=list, description=\"Tags.\")$/", "language": "Python", "typeref": "typename:list[str]", "kind": "variable", "scope": "QuoteCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    text: Optional[str] = Field($/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "QuoteExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    text: Optional[str] = Field(None, description=\"Updated quote text.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "QuoteUpdateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    text: str = Field(..., description=\"Quote text.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "QuoteCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "transcript_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    transcript_id: Optional[str] = Field($/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "QuoteExtractRequest", "scopeKind": "class"}, {"_type": "tag", "name": "transcript_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^    transcript_id: str = Field(..., description=\"Associated transcript ID.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "QuoteCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "update_quote", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/quotes.py", "pattern": "/^def update_quote(quote_id: str, payload: QuoteUpdateRequest) -> Quote:$/", "language": "Python", "typeref": "typename:Quote", "kind": "function", "signature": "(quote_id: str, payload: QuoteUpdateRequest)"}], "hash": "d368e32bf0c6679c3c503744236c64f3", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/routers/quotes.py", "fields": [{"name": "Optional[bool] approved", "scope": "QuoteUpdateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] asset_id", "scope": "QuoteExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[float] confidence", "scope": "QuoteCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[float] end", "scope": "QuoteCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "List[Quote] items", "scope": "QuoteExtractResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "int max_candidates", "scope": "QuoteExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int min_length", "scope": "QuoteExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"quotes\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[float] start", "scope": "QuoteCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[list[str]] tags", "scope": "QuoteUpdateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "list[str] tags", "scope": "QuoteCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] text", "scope": "QuoteExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str text", "scope": "QuoteCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] transcript_id", "scope": "QuoteExtractRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str transcript_id", "scope": "QuoteCreateRequest", "scopeKind": "class", "description": "unavailable"}]}