{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing transcript entities in a web application, including creation, retrieval, updating, versioning, and segment management, using FastAPI framework and in-memory storage.", "external_files": ["src.api.models", "src.api.store"], "external_methods": ["generate_id", "datetime.utcnow", "transcript.model_copy", "transcript.model_dump"], "published": ["create_transcript", "list_transcripts", "get_transcript", "put_transcript", "get_versions", "get_audit", "append_segment"], "classes": [{"name": "TranscriptCreateRequest", "description": "Request model for creating a transcript, includes asset ID, optional language and text."}, {"name": "TranscriptResponse", "description": "Response model wrapping a Transcript object for API output."}, {"name": "TranscriptUpdateRequest", "description": "Request model for updating a transcript, with optional fields for language, text, and status."}, {"name": "SegmentAppendRequest", "description": "Request model for appending a segment to a transcript, including timing, text, and optional speaker."}], "methods": [{"name": "TranscriptResponse create_transcript(payload: TranscriptCreateRequest)", "description": "Creates a new in-memory transcript record linked to an asset ID.", "scope": "", "scopeKind": ""}, {"name": "list_transcripts()", "description": "Returns a list of all stored transcripts.", "scope": "", "scopeKind": ""}, {"name": "Transcript get_transcript(transcript_id: str)", "description": "Fetches a specific transcript by its ID.", "scope": "", "scopeKind": ""}, {"name": "Transcript put_transcript(transcript_id: str, payload: TranscriptUpdateRequest)", "description": "Updates a transcript's fields, maintaining version history and audit log.", "scope": "", "scopeKind": ""}, {"name": "get_versions(transcript_id: str)", "description": "Retrieves all versions of a specific transcript from in-memory storage.", "scope": "", "scopeKind": ""}, {"name": "get_audit(transcript_id: str)", "description": "Retrieves the audit log entries for a specific transcript.", "scope": "", "scopeKind": ""}, {"name": "Transcript append_segment(transcript_id: str, payload: SegmentAppendRequest)", "description": "Appends a new segment to an existing transcript.", "scope": "", "scopeKind": ""}], "calls": ["generate_id(\"transcript\")", "transcript.model_copy(deep=True)", "transcript.model_dump()", "datetime.utcnow()"], "search-terms": ["transcripts API", "in-memory transcript management", "FastAPI transcripts routes", "versioning and audit logs for transcripts", "segment appending in transcripts"], "state": 2, "file_id": 8, "knowledge_revision": 35, "git_revision": "dcaf5d9fbd7c8beb91dd3c12ba73c997083c95c2", "revision_history": [{"18": ""}, {"35": "dcaf5d9fbd7c8beb91dd3c12ba73c997083c95c2"}], "ctags": [{"_type": "tag", "name": "SegmentAppendRequest", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^class SegmentAppendRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TranscriptCreateRequest", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^class TranscriptCreateRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TranscriptResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^class TranscriptResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TranscriptUpdateRequest", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^class TranscriptUpdateRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_TRANSCRIPT_AUDIT", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^_TRANSCRIPT_AUDIT: dict[str, List[dict]] = {}$/", "language": "Python", "typeref": "typename:dict[str, List[dict]]", "kind": "variable"}, {"_type": "tag", "name": "_TRANSCRIPT_VERSIONS", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^_TRANSCRIPT_VERSIONS: dict[str, List[Transcript]] = {}$/", "language": "Python", "typeref": "typename:dict[str, List[Transcript]]", "kind": "variable"}, {"_type": "tag", "name": "append_segment", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^def append_segment(transcript_id: str, payload: SegmentAppendRequest) -> Transcript:$/", "language": "Python", "typeref": "typename:Transcript", "kind": "function", "signature": "(transcript_id: str, payload: SegmentAppendRequest)"}, {"_type": "tag", "name": "asset_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    asset_id: str = Field(..., description=\"ID of the asset to transcribe.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TranscriptCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "create_transcript", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^def create_transcript(payload: TranscriptCreateRequest) -> TranscriptResponse:$/", "language": "Python", "typeref": "typename:TranscriptResponse", "kind": "function", "signature": "(payload: TranscriptCreateRequest)"}, {"_type": "tag", "name": "end", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    end: float = Field(..., description=\"End time in seconds.\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "SegmentAppendRequest", "scopeKind": "class"}, {"_type": "tag", "name": "get_audit", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^def get_audit(transcript_id: str):$/", "language": "Python", "kind": "function", "signature": "(transcript_id: str)"}, {"_type": "tag", "name": "get_transcript", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^def get_transcript(transcript_id: str) -> Transcript:$/", "language": "Python", "typeref": "typename:Transcript", "kind": "function", "signature": "(transcript_id: str)"}, {"_type": "tag", "name": "get_versions", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^def get_versions(transcript_id: str):$/", "language": "Python", "kind": "function", "signature": "(transcript_id: str)"}, {"_type": "tag", "name": "language", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    language: Optional[str] = Field(None, description=\"Language code (BCP-47).\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TranscriptCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "language", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    language: Optional[str] = Field(None, description=\"Language code (BCP-47).\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TranscriptUpdateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "list_transcripts", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^def list_transcripts():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "put_transcript", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^def put_transcript(transcript_id: str, payload: TranscriptUpdateRequest) -> Transcript:$/", "language": "Python", "typeref": "typename:Transcript", "kind": "function", "signature": "(transcript_id: str, payload: TranscriptUpdateRequest)"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^router = APIRouter(tags=[\"transcripts\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "speaker", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    speaker: Optional[str] = Field(None, description=\"Speaker label.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "SegmentAppendRequest", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    start: float = Field(..., description=\"Start time in seconds.\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "SegmentAppendRequest", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    status: Optional[JobStatus] = Field(None, description=\"Processing status.\")$/", "language": "Python", "typeref": "typename:Optional[JobStatus]", "kind": "variable", "scope": "TranscriptUpdateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    text: Optional[str] = Field(None, description=\"Full transcript text (manual or precomputed)./", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TranscriptCreateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    text: Optional[str] = Field(None, description=\"Full transcript text.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TranscriptUpdateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/transcripts.py", "pattern": "/^    text: str = Field(..., description=\"Segment text.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SegmentAppendRequest", "scopeKind": "class"}], "hash": "fa2824597b24e798e19dca0fd9a9cf1e", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/routers/transcripts.py", "fields": [{"name": "dict[str, List[dict]] _TRANSCRIPT_AUDIT", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "dict[str, List[Transcript]] _TRANSCRIPT_VERSIONS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str asset_id", "scope": "TranscriptCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "float end", "scope": "SegmentAppendRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] language", "scope": "TranscriptCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"transcripts\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] speaker", "scope": "SegmentAppendRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "float start", "scope": "SegmentAppendRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[JobStatus] status", "scope": "TranscriptUpdateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] text", "scope": "TranscriptCreateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str text", "scope": "SegmentAppendRequest", "scopeKind": "class", "description": "unavailable"}]}