{"is_source_file": true, "format": "Python", "description": "This file defines API routes for uploading media assets, checking their processing status, and listing assets within a FastAPI application. It manages in-memory assets and transcripts, simulating background transcription jobs.", "external_files": ["src.api.models", "src.api.store"], "external_methods": ["generate_id"], "published": ["upload_asset", "get_upload_status", "list_assets", "get_asset"], "classes": [{"name": "AssetCreateResponse", "description": "Response model for asset creation, including asset ID and status."}, {"name": "UploadStatusResponse", "description": "Response model for checking the processing status of an asset, including transcript info."}], "methods": [{"name": "AssetCreateResponse upload_asset( background_tasks: BackgroundTasks, file: UploadFile = File(..., description=\"Binary file to upload.\"), owner_id: Optional[str] = Form(None, description=\"Owner user ID (MVP optional).\"), )", "description": "Handles uploading a file and registering an asset, queuing a background transcription job.", "scope": "", "scopeKind": ""}, {"name": "UploadStatusResponse get_upload_status(asset_id: str)", "description": "Retrieves the processing status of a registered asset.", "scope": "", "scopeKind": ""}, {"name": "list_assets()", "description": "Returns a list of all registered assets.", "scope": "", "scopeKind": ""}, {"name": "get_asset(asset_id: str)", "description": "Fetches a specific asset by its ID.", "scope": "", "scopeKind": ""}, {"name": "AssetType _infer_asset_type(content_type: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None _simulate_transcription_job(transcript_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["generate_id", "ASSETS.get", "TRANSCRIPTS.get", "TRANSCRIPTS.__setitem__", "background_tasks.add_task", "HTTPException", "datetime.utcnow"], "search-terms": ["APIRouter", "upload_asset", "transcription", "asset", "background task", "in-memory storage"], "state": 2, "file_id": 7, "knowledge_revision": 32, "git_revision": "dcaf5d9fbd7c8beb91dd3c12ba73c997083c95c2", "revision_history": [{"16": ""}, {"28": ""}, {"32": "dcaf5d9fbd7c8beb91dd3c12ba73c997083c95c2"}], "ctags": [{"_type": "tag", "name": "AssetCreateResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^class AssetCreateResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UploadStatusResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^class UploadStatusResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_infer_asset_type", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def _infer_asset_type(content_type: str) -> AssetType:$/", "language": "Python", "typeref": "typename:AssetType", "kind": "function", "signature": "(content_type: str)"}, {"_type": "tag", "name": "_simulate_transcription_job", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def _simulate_transcription_job(transcript_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(transcript_id: str)"}, {"_type": "tag", "name": "asset", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    asset: Optional[Asset] = Field(None, description=\"Registered asset metadata (MVP convenience/", "language": "Python", "typeref": "typename:Optional[Asset]", "kind": "variable", "scope": "AssetCreateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "asset_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    asset_id: str = Field(..., description=\"Asset ID.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "asset_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    asset_id: str = Field(..., description=\"Unique ID of the registered asset.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AssetCreateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "get_asset", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def get_asset(asset_id: str):$/", "language": "Python", "kind": "function", "signature": "(asset_id: str)"}, {"_type": "tag", "name": "get_upload_status", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def get_upload_status(asset_id: str) -> UploadStatusResponse:$/", "language": "Python", "typeref": "typename:UploadStatusResponse", "kind": "function", "signature": "(asset_id: str)"}, {"_type": "tag", "name": "list_assets", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def list_assets():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    message: Optional[str] = Field(None, description=\"Status message.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    note: Optional[str] = Field(None, description=\"Additional information about the processing.\"/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "AssetCreateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^router = APIRouter(tags=[\"uploads\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    status: JobStatus = Field(..., description=\"Transcription processing status.\")$/", "language": "Python", "typeref": "typename:JobStatus", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    status: str = Field(..., description=\"Initial processing status (queued).\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AssetCreateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "transcript_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    transcript_id: Optional[str] = Field(None, description=\"Transcript ID when available.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    updated_at: datetime = Field(..., description=\"Last updated timestamp.\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "upload_asset", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^async def upload_asset($/", "language": "Python", "typeref": "typename:AssetCreateResponse", "kind": "function", "signature": "( background_tasks: BackgroundTasks, file: UploadFile = File(..., description=\"Binary file to upload.\"), owner_id: Optional[str] = Form(None, description=\"Owner user ID (MVP optional).\"), )"}], "hash": "778d99ebb2b75d413c1bd2cf6ca46a67", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/routers/uploads.py", "fields": [{"name": "Optional[Asset] asset", "scope": "AssetCreateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str asset_id", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] message", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] note", "scope": "AssetCreateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"uploads\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JobStatus status", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str status", "scope": "AssetCreateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] transcript_id", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime updated_at", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}]}