{"is_source_file": true, "format": "Python (FastAPI)", "description": "This file defines API routes for uploading assets, querying their status, and listing assets in a FastAPI application. It manages in-memory storage for assets and transcripts, simulates background transcription processes, and provides endpoints for clients to interact with uploaded media files.", "external_files": ["src.api.models", "src.api.store"], "external_methods": ["src.api.store.generate_id", "_simulate_transcription_job_with_delay (internal method)"], "published": ["upload_asset", "get_upload_status", "list_assets", "get_asset"], "classes": [{"name": "AssetCreateResponse", "description": "Response model for asset creation, including asset ID, status, optional note, and asset metadata."}, {"name": "UploadStatusResponse", "description": "Response model for transfer status, including asset ID, status, transcript ID, update timestamp, and message."}], "methods": [{"name": "AssetCreateResponse upload_asset( background_tasks: BackgroundTasks, file: UploadFile = File(..., description=\"Binary file to upload.\"), owner_id: Optional[str] = Form(None, description=\"Owner user ID (MVP optional).\"), )", "description": "API endpoint to upload a media file, creates an asset, and queues a simulated transcription job.", "scope": "", "scopeKind": ""}, {"name": "UploadStatusResponse get_upload_status(asset_id: str)", "description": "API endpoint to retrieve the current processing status of an uploaded asset.", "scope": "", "scopeKind": ""}, {"name": "list_assets()", "description": "API endpoint to list all registered assets.", "scope": "", "scopeKind": ""}, {"name": "get_asset(asset_id: str)", "description": "API endpoint to fetch details of a specific asset by ID.", "scope": "", "scopeKind": ""}, {"name": "AssetType _infer_asset_type(content_type: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None _simulate_transcription_job_with_delay(asset_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["generate_id", "_simulate_transcription_job_with_delay", "ASSETS.get", "TRANSCRIPTS.values", "TRANSCRIPTS.get", "datetime.utcnow", "time.sleep"], "search-terms": ["upload_asset", "transcription job", "asset store", "background task", "simulate transcription", "asset ID", "status endpoint", "in-memory store", "APIRouter"], "state": 2, "file_id": 7, "knowledge_revision": 36, "git_revision": "04e7a57b8c19369384c9d0fb8658d4fa30e66cb0", "revision_history": [{"16": ""}, {"28": ""}, {"32": "dcaf5d9fbd7c8beb91dd3c12ba73c997083c95c2"}, {"36": "04e7a57b8c19369384c9d0fb8658d4fa30e66cb0"}], "ctags": [{"_type": "tag", "name": "AssetCreateResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^class AssetCreateResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UploadStatusResponse", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^class UploadStatusResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_infer_asset_type", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def _infer_asset_type(content_type: str) -> AssetType:$/", "language": "Python", "typeref": "typename:AssetType", "kind": "function", "signature": "(content_type: str)"}, {"_type": "tag", "name": "_simulate_transcription_job_with_delay", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def _simulate_transcription_job_with_delay(asset_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(asset_id: str)"}, {"_type": "tag", "name": "asset", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    asset: Optional[Asset] = Field(None, description=\"Registered asset metadata (MVP convenience/", "language": "Python", "typeref": "typename:Optional[Asset]", "kind": "variable", "scope": "AssetCreateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "asset_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    asset_id: str = Field(..., description=\"Asset ID.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "asset_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    asset_id: str = Field(..., description=\"Unique ID of the registered asset.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AssetCreateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "get_asset", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def get_asset(asset_id: str):$/", "language": "Python", "kind": "function", "signature": "(asset_id: str)"}, {"_type": "tag", "name": "get_upload_status", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def get_upload_status(asset_id: str) -> UploadStatusResponse:$/", "language": "Python", "typeref": "typename:UploadStatusResponse", "kind": "function", "signature": "(asset_id: str)"}, {"_type": "tag", "name": "list_assets", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^def list_assets():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    message: Optional[str] = Field(None, description=\"Status message.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    note: Optional[str] = Field(None, description=\"Additional information about the processing.\"/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "AssetCreateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^router = APIRouter(tags=[\"uploads\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    status: JobStatus = Field(..., description=\"Transcription processing status.\")$/", "language": "Python", "typeref": "typename:JobStatus", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    status: str = Field(..., description=\"Initial processing status (queued).\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AssetCreateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "transcript_id", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    transcript_id: Optional[str] = Field(None, description=\"Transcript ID when available.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^    updated_at: datetime = Field(..., description=\"Last updated timestamp.\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "UploadStatusResponse", "scopeKind": "class"}, {"_type": "tag", "name": "upload_asset", "path": "/home/kavia/workspace/code-generation/quoteextractor-platform-29-39/backend/src/api/routers/uploads.py", "pattern": "/^async def upload_asset($/", "language": "Python", "typeref": "typename:AssetCreateResponse", "kind": "function", "signature": "( background_tasks: BackgroundTasks, file: UploadFile = File(..., description=\"Binary file to upload.\"), owner_id: Optional[str] = Form(None, description=\"Owner user ID (MVP optional).\"), )"}], "hash": "2c5b7363f1823d1615075408649bd666", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/routers/uploads.py", "fields": [{"name": "Optional[Asset] asset", "scope": "AssetCreateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str asset_id", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] message", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] note", "scope": "AssetCreateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"uploads\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JobStatus status", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str status", "scope": "AssetCreateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] transcript_id", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime updated_at", "scope": "UploadStatusResponse", "scopeKind": "class", "description": "unavailable"}]}